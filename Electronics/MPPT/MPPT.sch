EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:switches
LIBS:relays
LIBS:motors
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:utsvt-power-regulators
LIBS:utsvt-microcontrollers
LIBS:utsvt-connectors
LIBS:utsvt-chips
LIBS:MPPT-cache
EELAYER 25 0
EELAYER END
$Descr USLetter 11000 8500
encoding utf-8
Sheet 1 1
Title "UT SVT MPPT 2018"
Date ""
Rev "Rev1"
Comp "UT Solar Vehicle Team"
Comment1 "Note: CAN handled on separate Nucleo breakout"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text Notes 3250 850  0    120  ~ 24
DC/DC Converter
Text Notes 1550 4800 0    120  ~ 24
Current Sensors
Text Notes 1450 3050 0    120  ~ 24
Voltage Sensors
Text Notes 8300 850  0    120  ~ 24
Power Regulation
Text Notes 4350 3050 0    120  ~ 24
Nucleo Connections
$Comp
L L_Core_Ferrite L1
U 1 1 5BB283A5
P 3450 1300
F 0 "L1" V 3400 1300 50  0000 C CNN
F 1 "Ferrite 560uH" V 3560 1300 50  0000 C CNN
F 2 "" H 3450 1300 50  0001 C CNN
F 3 "" H 3450 1300 50  0001 C CNN
	1    3450 1300
	0    -1   -1   0   
$EndComp
$Comp
L Q_NMOS_DGS Q1
U 1 1 5BB28407
P 3600 1950
F 0 "Q1" H 3800 2000 50  0000 L CNN
F 1 "NMOS" H 3800 1900 50  0000 L CNN
F 2 "" H 3800 2050 50  0001 C CNN
F 3 "" H 3600 1950 50  0001 C CNN
	1    3600 1950
	1    0    0    -1  
$EndComp
$Comp
L Q_NMOS_DGS Q2
U 1 1 5BB28472
P 4000 1650
F 0 "Q2" H 4200 1700 50  0000 L CNN
F 1 "NMOS" H 4200 1600 50  0000 L CNN
F 2 "" H 4200 1750 50  0001 C CNN
F 3 "" H 4000 1650 50  0001 C CNN
	1    4000 1650
	1    0    0    -1  
$EndComp
Text Label 3200 1650 2    60   ~ 12
Drive_PWM
$Comp
L R R2
U 1 1 5BB284C6
P 3300 2200
F 0 "R2" V 3380 2200 50  0000 C CNN
F 1 "10k" V 3300 2200 50  0000 C CNN
F 2 "" V 3230 2200 50  0001 C CNN
F 3 "" H 3300 2200 50  0001 C CNN
	1    3300 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	3600 1300 5000 1300
Wire Wire Line
	3700 1300 3700 1750
Connection ~ 3700 1300
Wire Wire Line
	3700 2450 3700 2150
Connection ~ 3700 2450
$Comp
L CP1 C1
U 1 1 5BB285EF
P 2550 1800
F 0 "C1" H 2575 1900 50  0000 L CNN
F 1 "1000uF" H 2575 1700 50  0000 L CNN
F 2 "" H 2550 1800 50  0001 C CNN
F 3 "" H 2550 1800 50  0001 C CNN
	1    2550 1800
	1    0    0    -1  
$EndComp
Wire Wire Line
	1250 1300 3300 1300
Wire Wire Line
	2550 1250 2550 1650
Connection ~ 2550 1300
Wire Wire Line
	2550 1950 2550 2450
$Comp
L Conn_01x02 J1
U 1 1 5BB28712
P 1050 1400
F 0 "J1" H 1050 1500 50  0000 C CNN
F 1 "Solar Array" H 1000 1200 50  0000 L CNN
F 2 "" H 1050 1400 50  0001 C CNN
F 3 "" H 1050 1400 50  0001 C CNN
	1    1050 1400
	-1   0    0    1   
$EndComp
Text Notes 1600 2600 0    60   Italic 0
Array\nCurrent\nSensor
Wire Notes Line
	1550 2300 2000 2300
Wire Notes Line
	2000 2300 2000 2650
Wire Notes Line
	2000 2650 1550 2650
Wire Notes Line
	1550 2650 1550 2300
Text Notes 2000 2000 0    60   Italic 0
Array\nVoltage\nSensor
Wire Wire Line
	3200 1650 3800 1650
Connection ~ 3300 1650
$Comp
L D_Zener_ALT D4
U 1 1 5BB284FA
P 3100 2200
F 0 "D4" H 3100 2300 50  0000 C CNN
F 1 "18V Zener" H 3100 2100 50  0000 C CNN
F 2 "" H 3100 2200 50  0001 C CNN
F 3 "" H 3100 2200 50  0001 C CNN
	1    3100 2200
	0    1    1    0   
$EndComp
Wire Wire Line
	3100 2050 3100 1950
Wire Wire Line
	3100 1950 3400 1950
Wire Wire Line
	3300 1650 3300 2050
Connection ~ 3300 1950
Wire Wire Line
	3300 2450 3300 2350
Connection ~ 3300 2450
Wire Wire Line
	3100 2450 3100 2350
Connection ~ 3100 2450
Wire Notes Line
	1950 1700 2350 1700
Wire Notes Line
	2350 1700 2350 2050
Wire Notes Line
	2350 2050 1950 2050
Wire Notes Line
	1950 2050 1950 1700
Connection ~ 4100 2450
Wire Wire Line
	4100 1450 4100 1300
Connection ~ 4100 1300
$Comp
L R R1
U 1 1 5BB2959B
P 4550 1700
F 0 "R1" V 4630 1700 50  0000 C CNN
F 1 "R" V 4550 1700 50  0000 C CNN
F 2 "" V 4480 1700 50  0001 C CNN
F 3 "" H 4550 1700 50  0001 C CNN
	1    4550 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	4550 1850 4550 1900
Wire Wire Line
	4700 2450 4700 2250
Connection ~ 4700 2450
Wire Notes Line
	4950 1450 5050 1450
Wire Notes Line
	5050 1450 5050 2250
Wire Notes Line
	5050 2250 4950 2250
Text Notes 5150 2050 1    60   Italic 0
Snubber
$Comp
L D_Schottky D3
U 1 1 5BB297A0
P 5150 1300
F 0 "D3" H 5150 1400 50  0000 C CNN
F 1 "Schottky" H 5150 1200 50  0000 C CNN
F 2 "" H 5150 1300 50  0001 C CNN
F 3 "" H 5150 1300 50  0001 C CNN
	1    5150 1300
	-1   0    0    1   
$EndComp
$Comp
L D_Schottky D2
U 1 1 5BB297FE
P 5150 1000
F 0 "D2" H 5150 1100 50  0000 C CNN
F 1 "Schottky" H 5150 900 50  0000 C CNN
F 2 "" H 5150 1000 50  0001 C CNN
F 3 "" H 5150 1000 50  0001 C CNN
	1    5150 1000
	-1   0    0    1   
$EndComp
Wire Wire Line
	5000 1000 4900 1000
Wire Wire Line
	4900 1000 4900 1300
Connection ~ 4900 1300
Wire Wire Line
	5300 1300 6500 1300
Wire Wire Line
	5400 1000 5400 1650
Wire Wire Line
	5400 1000 5300 1000
Wire Notes Line
	2150 1700 2150 1300
Wire Notes Line
	2150 2050 2150 2450
$Comp
L CP1 C2
U 1 1 5BB29C25
P 5400 1800
F 0 "C2" H 5425 1900 50  0000 L CNN
F 1 "1000uF" H 5425 1700 50  0000 L CNN
F 2 "" H 5400 1800 50  0001 C CNN
F 3 "" H 5400 1800 50  0001 C CNN
	1    5400 1800
	1    0    0    -1  
$EndComp
Connection ~ 5400 1300
Wire Wire Line
	5400 2450 5400 1950
Text Notes 6150 2600 0    60   Italic 0
Battery\nCurrent\nSensor
Wire Notes Line
	6100 2300 6100 2650
Wire Notes Line
	6100 2300 6550 2300
Wire Notes Line
	6550 2300 6550 2650
Wire Notes Line
	6550 2650 6100 2650
$Comp
L Conn_01x02 J2
U 1 1 5BB2AA41
P 7150 1400
F 0 "J2" H 7150 1500 50  0000 C CNN
F 1 "Battery" H 7100 1200 50  0000 L CNN
F 2 "" H 7150 1400 50  0001 C CNN
F 3 "" H 7150 1400 50  0001 C CNN
	1    7150 1400
	1    0    0    1   
$EndComp
Wire Wire Line
	1250 1400 1300 1400
Wire Wire Line
	1300 1400 1300 2450
Connection ~ 2550 2450
Wire Wire Line
	6900 1400 6900 2450
Wire Wire Line
	6900 1400 6950 1400
Connection ~ 5400 2450
Text Notes 5800 2000 0    60   Italic 0
Battery\nVoltage\nSensor
Wire Notes Line
	5750 1700 5750 2050
Wire Notes Line
	5750 2050 6200 2050
Wire Notes Line
	6200 2050 6200 1700
Wire Notes Line
	6200 1700 5750 1700
Wire Notes Line
	5950 1700 5950 1300
Wire Notes Line
	5950 2050 5950 2450
$Comp
L R R?
U 1 1 5BB2BAFB
P 1400 3450
F 0 "R?" V 1480 3450 50  0000 C CNN
F 1 "100k" V 1400 3450 50  0000 C CNN
F 2 "" V 1330 3450 50  0001 C CNN
F 3 "" H 1400 3450 50  0001 C CNN
	1    1400 3450
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5BB2BB53
P 1400 3900
F 0 "R?" V 1480 3900 50  0000 C CNN
F 1 "2k" V 1400 3900 50  0000 C CNN
F 2 "" V 1330 3900 50  0001 C CNN
F 3 "" H 1400 3900 50  0001 C CNN
	1    1400 3900
	1    0    0    -1  
$EndComp
$Comp
L D_ALT D?
U 1 1 5BB2BC26
P 1150 3900
F 0 "D?" H 1150 4000 50  0000 C CNN
F 1 "Diode" H 1150 3800 50  0000 C CNN
F 2 "" H 1150 3900 50  0001 C CNN
F 3 "" H 1150 3900 50  0001 C CNN
	1    1150 3900
	0    1    1    0   
$EndComp
$Comp
L D_Zener_ALT D?
U 1 1 5BB2BC8A
P 850 3900
F 0 "D?" H 850 4000 50  0000 C CNN
F 1 "Zener" H 850 3800 50  0000 C CNN
F 2 "" H 850 3900 50  0001 C CNN
F 3 "" H 850 3900 50  0001 C CNN
	1    850  3900
	0    1    1    0   
$EndComp
Wire Wire Line
	850  3750 850  3650
Wire Wire Line
	850  3650 1650 3650
Wire Wire Line
	1400 3600 1400 3750
Connection ~ 1400 3650
Wire Wire Line
	1150 3750 1150 3650
Connection ~ 1150 3650
Wire Wire Line
	850  4050 850  4150
Wire Wire Line
	850  4150 1400 4150
Wire Wire Line
	1150 4150 1150 4050
Wire Wire Line
	1400 4050 1400 4250
Connection ~ 1150 4150
$Comp
L GNDPWR #PWR02
U 1 1 5BB2BED0
P 1400 4250
F 0 "#PWR02" H 1400 4050 50  0001 C CNN
F 1 "GNDPWR" H 1400 4120 50  0000 C CNN
F 2 "" H 1400 4200 50  0001 C CNN
F 3 "" H 1400 4200 50  0001 C CNN
	1    1400 4250
	1    0    0    -1  
$EndComp
Connection ~ 1400 4150
Wire Wire Line
	1300 3250 1400 3250
Wire Wire Line
	1400 3250 1400 3300
$Comp
L R R?
U 1 1 5BB2C1F1
P 2900 3450
F 0 "R?" V 2980 3450 50  0000 C CNN
F 1 "100k" V 2900 3450 50  0000 C CNN
F 2 "" V 2830 3450 50  0001 C CNN
F 3 "" H 2900 3450 50  0001 C CNN
	1    2900 3450
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5BB2C1F7
P 2900 3900
F 0 "R?" V 2980 3900 50  0000 C CNN
F 1 "2k" V 2900 3900 50  0000 C CNN
F 2 "" V 2830 3900 50  0001 C CNN
F 3 "" H 2900 3900 50  0001 C CNN
	1    2900 3900
	1    0    0    -1  
$EndComp
$Comp
L D_ALT D?
U 1 1 5BB2C1FD
P 2650 3900
F 0 "D?" H 2650 4000 50  0000 C CNN
F 1 "Diode" H 2650 3800 50  0000 C CNN
F 2 "" H 2650 3900 50  0001 C CNN
F 3 "" H 2650 3900 50  0001 C CNN
	1    2650 3900
	0    1    1    0   
$EndComp
$Comp
L D_Zener_ALT D?
U 1 1 5BB2C203
P 2350 3900
F 0 "D?" H 2350 4000 50  0000 C CNN
F 1 "Zener" H 2350 3800 50  0000 C CNN
F 2 "" H 2350 3900 50  0001 C CNN
F 3 "" H 2350 3900 50  0001 C CNN
	1    2350 3900
	0    1    1    0   
$EndComp
Wire Wire Line
	2350 3750 2350 3650
Wire Wire Line
	2350 3650 3150 3650
Wire Wire Line
	2900 3600 2900 3750
Connection ~ 2900 3650
Wire Wire Line
	2650 3750 2650 3650
Connection ~ 2650 3650
Wire Wire Line
	2350 4050 2350 4150
Wire Wire Line
	2350 4150 2900 4150
Wire Wire Line
	2650 4150 2650 4050
Wire Wire Line
	2900 4050 2900 4250
Connection ~ 2650 4150
$Comp
L GNDPWR #PWR03
U 1 1 5BB2C218
P 2900 4250
F 0 "#PWR03" H 2900 4050 50  0001 C CNN
F 1 "GNDPWR" H 2900 4120 50  0000 C CNN
F 2 "" H 2900 4200 50  0001 C CNN
F 3 "" H 2900 4200 50  0001 C CNN
	1    2900 4250
	1    0    0    -1  
$EndComp
Connection ~ 2900 4150
Wire Wire Line
	2800 3250 2900 3250
Wire Wire Line
	2900 3250 2900 3300
Text Label 1500 3650 0    60   ~ 12
Array_Voltage
Text Label 3000 3650 0    60   ~ 12
Battery_Voltage
Wire Notes Line
	650  4500 3800 4500
Wire Notes Line
	3800 4500 3800 2850
Wire Notes Line
	3800 2850 650  2850
Wire Notes Line
	650  2850 650  4500
$Comp
L Conn_01x02 J3
U 1 1 5BB2D117
P 8000 1400
F 0 "J3" H 8000 1500 50  0000 C CNN
F 1 "Car Power" V 8100 1350 50  0000 C CNN
F 2 "" H 8000 1400 50  0001 C CNN
F 3 "" H 8000 1400 50  0001 C CNN
	1    8000 1400
	-1   0    0    1   
$EndComp
$Comp
L +12P #PWR04
U 1 1 5BB2D23E
P 9850 1250
F 0 "#PWR04" H 9850 1100 50  0001 C CNN
F 1 "+12P" H 9850 1390 50  0000 C CNN
F 2 "" H 9850 1250 50  0001 C CNN
F 3 "" H 9850 1250 50  0001 C CNN
	1    9850 1250
	1    0    0    -1  
$EndComp
$Comp
L GNDREF #PWR05
U 1 1 5BB2D2AA
P 8250 1450
F 0 "#PWR05" H 8250 1200 50  0001 C CNN
F 1 "GNDREF" H 8250 1300 50  0000 C CNN
F 2 "" H 8250 1450 50  0001 C CNN
F 3 "" H 8250 1450 50  0001 C CNN
	1    8250 1450
	1    0    0    -1  
$EndComp
Wire Wire Line
	8200 1300 8400 1300
Wire Wire Line
	8250 1300 8250 1250
Wire Wire Line
	8200 1400 8400 1400
Wire Wire Line
	8250 1400 8250 1450
Wire Notes Line
	650  650  650  2750
Wire Notes Line
	650  2750 7450 2750
Wire Notes Line
	7450 2750 7450 650 
Wire Notes Line
	7450 650  650  650 
Wire Wire Line
	4100 2450 4100 1850
$Comp
L GNDPWR #PWR07
U 1 1 5BB2E517
P 3900 2500
F 0 "#PWR07" H 3900 2300 50  0001 C CNN
F 1 "GNDPWR" H 3900 2370 50  0000 C CNN
F 2 "" H 3900 2450 50  0001 C CNN
F 3 "" H 3900 2450 50  0001 C CNN
	1    3900 2500
	1    0    0    -1  
$EndComp
Wire Wire Line
	3900 2450 3900 2500
Connection ~ 3900 2450
$Comp
L D_ALT D1
U 1 1 5BB2EB96
P 4850 1700
F 0 "D1" H 4850 1800 50  0000 C CNN
F 1 "Diode" H 4850 1600 50  0000 C CNN
F 2 "" H 4850 1700 50  0001 C CNN
F 3 "" H 4850 1700 50  0001 C CNN
	1    4850 1700
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4850 1900 4850 1850
Wire Wire Line
	4350 1900 4850 1900
$Comp
L CP1 C3
U 1 1 5BB295C8
P 4700 2100
F 0 "C3" H 4725 2200 50  0000 L CNN
F 1 "CP" H 4725 2000 50  0000 L CNN
F 2 "" H 4700 2100 50  0001 C CNN
F 3 "" H 4700 2100 50  0001 C CNN
	1    4700 2100
	1    0    0    -1  
$EndComp
Wire Wire Line
	4700 1950 4700 1900
Connection ~ 4700 1900
Wire Wire Line
	4550 1550 4550 1500
Wire Wire Line
	4550 1500 4850 1500
Wire Wire Line
	4850 1500 4850 1550
Wire Wire Line
	4700 1250 4700 1500
Connection ~ 4700 1300
Connection ~ 4700 1500
$Comp
L Fuse F1
U 1 1 5BB2FF01
P 6650 1300
F 0 "F1" V 6730 1300 50  0000 C CNN
F 1 "Fuse" V 6575 1300 50  0000 C CNN
F 2 "" V 6580 1300 50  0001 C CNN
F 3 "" H 6650 1300 50  0001 C CNN
	1    6650 1300
	0    1    1    0   
$EndComp
Wire Wire Line
	6800 1300 6950 1300
$Comp
L Nucleo_L432KC U?
U 1 1 5BBBD3B0
P 4950 4100
F 0 "U?" H 4950 3250 60  0000 C CNN
F 1 "Nucleo_L432KC" H 4950 4950 60  0000 C CNN
F 2 "" H 4950 3800 60  0001 C CNN
F 3 "" H 4950 3800 60  0001 C CNN
	1    4950 4100
	1    0    0    -1  
$EndComp
Wire Wire Line
	5450 3400 5500 3400
Wire Wire Line
	5500 3400 5500 3350
$Comp
L +5V #PWR09
U 1 1 5BBBD677
P 5700 3350
F 0 "#PWR09" H 5700 3200 50  0001 C CNN
F 1 "+5V" H 5700 3490 50  0000 C CNN
F 2 "" H 5700 3350 50  0001 C CNN
F 3 "" H 5700 3350 50  0001 C CNN
	1    5700 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	5700 3350 5700 3700
Wire Wire Line
	5700 3700 5450 3700
Wire Wire Line
	5550 4950 5550 3500
Wire Wire Line
	5550 3500 5450 3500
Wire Wire Line
	4350 4950 4350 3700
Wire Wire Line
	4350 3700 4450 3700
$Comp
L +12V #PWR?
U 1 1 5BBBE0EE
P 8250 1250
F 0 "#PWR?" H 8250 1100 50  0001 C CNN
F 1 "+12V" H 8250 1390 50  0000 C CNN
F 2 "" H 8250 1250 50  0001 C CNN
F 3 "" H 8250 1250 50  0001 C CNN
	1    8250 1250
	1    0    0    -1  
$EndComp
Text Notes 7800 2850 0    60   ~ 0
Isolated Power Regions:\n* High Power/Nucleo\n   - +/-Arr\n   - +/-Batt\n   - +12P\n   - +9V\n   - +5V\n   - GNDPWR\n* Low Car Power\n   - +12V\n   - GNDREF
$Comp
L PDM2-S12-S12-S U?
U 1 1 5BBBED09
P 9250 1400
F 0 "U?" H 9250 1150 60  0000 C CNN
F 1 "PDM2-S12-S12-S" H 9250 1650 60  0000 C CNN
F 2 "" H 9250 1400 60  0001 C CNN
F 3 "" H 9250 1400 60  0001 C CNN
	1    9250 1400
	1    0    0    -1  
$EndComp
$Comp
L +12V #PWR?
U 1 1 5BBBED7D
P 8700 1250
F 0 "#PWR?" H 8700 1100 50  0001 C CNN
F 1 "+12V" H 8700 1390 50  0000 C CNN
F 2 "" H 8700 1250 50  0001 C CNN
F 3 "" H 8700 1250 50  0001 C CNN
	1    8700 1250
	1    0    0    -1  
$EndComp
Wire Wire Line
	8700 1250 8700 1300
Wire Wire Line
	8700 1300 8850 1300
$Comp
L GNDREF #PWR?
U 1 1 5BBBEE9D
P 8700 1500
F 0 "#PWR?" H 8700 1250 50  0001 C CNN
F 1 "GNDREF" H 8700 1350 50  0000 C CNN
F 2 "" H 8700 1500 50  0001 C CNN
F 3 "" H 8700 1500 50  0001 C CNN
	1    8700 1500
	1    0    0    -1  
$EndComp
Wire Wire Line
	8700 1500 8700 1400
Wire Wire Line
	8700 1400 8850 1400
Wire Wire Line
	9850 1250 9850 1300
Wire Wire Line
	9850 1300 9650 1300
$Comp
L GNDPWR #PWR?
U 1 1 5BBBF0C7
P 9850 1550
F 0 "#PWR?" H 9850 1350 50  0001 C CNN
F 1 "GNDPWR" H 9850 1420 50  0000 C CNN
F 2 "" H 9850 1500 50  0001 C CNN
F 3 "" H 9850 1500 50  0001 C CNN
	1    9850 1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	9850 1550 9850 1500
Wire Wire Line
	9850 1500 9650 1500
Wire Notes Line
	9850 1050 10050 1050
Wire Notes Line
	10050 1050 10050 1750
Wire Notes Line
	10050 1750 9850 1750
Text Notes 10250 1650 1    60   ~ 0
High Power\nControl
Wire Notes Line
	7750 650  7750 3000
Wire Notes Line
	7750 3000 10400 3000
Wire Notes Line
	10400 3000 10400 650 
Wire Notes Line
	10400 650  7750 650 
Wire Wire Line
	5450 4400 6650 4400
$Comp
L UCC27321 U?
U 1 1 5BBC0485
P 7150 4450
F 0 "U?" H 7150 4200 60  0000 C CNN
F 1 "UCC27321" H 7150 4700 60  0000 C CNN
F 2 "" H 7150 4450 60  0001 C CNN
F 3 "" H 7150 4450 60  0001 C CNN
	1    7150 4450
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5BBC08B0
P 8000 4400
F 0 "R?" V 8080 4400 50  0000 C CNN
F 1 "1R5" V 8000 4400 50  0000 C CNN
F 2 "" V 7930 4400 50  0001 C CNN
F 3 "" H 8000 4400 50  0001 C CNN
	1    8000 4400
	0    1    1    0   
$EndComp
Wire Wire Line
	7650 4400 7850 4400
Wire Wire Line
	7650 4500 7750 4500
Wire Wire Line
	7750 4500 7750 4400
Connection ~ 7750 4400
Wire Wire Line
	8150 4400 8250 4400
Text Label 8250 4400 0    60   ~ 12
Drive_PWM
$Comp
L +12P #PWR?
U 1 1 5BBC0ED7
P 7700 4250
F 0 "#PWR?" H 7700 4100 50  0001 C CNN
F 1 "+12P" H 7700 4390 50  0000 C CNN
F 2 "" H 7700 4250 50  0001 C CNN
F 3 "" H 7700 4250 50  0001 C CNN
	1    7700 4250
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR?
U 1 1 5BBC0FAD
P 7700 4650
F 0 "#PWR?" H 7700 4450 50  0001 C CNN
F 1 "GNDPWR" H 7700 4520 50  0000 C CNN
F 2 "" H 7700 4600 50  0001 C CNN
F 3 "" H 7700 4600 50  0001 C CNN
	1    7700 4650
	1    0    0    -1  
$EndComp
Wire Wire Line
	7650 4600 7700 4600
Wire Wire Line
	7700 4600 7700 4650
Wire Wire Line
	7650 4300 7700 4300
Wire Wire Line
	7700 4300 7700 4250
$Comp
L +12P #PWR?
U 1 1 5BBC1539
P 6600 4250
F 0 "#PWR?" H 6600 4100 50  0001 C CNN
F 1 "+12P" H 6600 4390 50  0000 C CNN
F 2 "" H 6600 4250 50  0001 C CNN
F 3 "" H 6600 4250 50  0001 C CNN
	1    6600 4250
	1    0    0    -1  
$EndComp
Wire Wire Line
	6600 4250 6600 4300
Wire Wire Line
	6600 4300 6650 4300
$Comp
L GNDPWR #PWR?
U 1 1 5BBC165F
P 6600 4650
F 0 "#PWR?" H 6600 4450 50  0001 C CNN
F 1 "GNDPWR" H 6600 4520 50  0000 C CNN
F 2 "" H 6600 4600 50  0001 C CNN
F 3 "" H 6600 4600 50  0001 C CNN
	1    6600 4650
	1    0    0    -1  
$EndComp
Wire Wire Line
	6600 4650 6600 4600
Wire Wire Line
	6600 4600 6650 4600
Wire Wire Line
	2550 2450 5400 2450
Wire Wire Line
	1300 2450 1550 2450
Wire Notes Line
	2000 2450 2550 2450
Text Label 1550 2450 2    60   ~ 12
-Arr
Text Notes 2000 2550 0    60   ~ 12
GNDPWR
Wire Notes Line
	5400 2450 6100 2450
Wire Wire Line
	6900 2450 6550 2450
Text Label 6550 2450 0    60   ~ 12
-Batt
Text Notes 6100 2550 2    60   ~ 12
GNDPWR
$Comp
L INA213 U?
U 1 1 5BBD5537
P 2100 5650
F 0 "U?" H 2150 5400 60  0000 L CNN
F 1 "INA213" H 2150 5900 60  0000 L CNN
F 2 "" H 2100 5650 60  0001 C CNN
F 3 "" H 2100 5650 60  0001 C CNN
	1    2100 5650
	1    0    0    -1  
$EndComp
$Comp
L +12P #PWR?
U 1 1 5BBD56F4
P 2100 5150
F 0 "#PWR?" H 2100 5000 50  0001 C CNN
F 1 "+12P" H 2100 5290 50  0000 C CNN
F 2 "" H 2100 5150 50  0001 C CNN
F 3 "" H 2100 5150 50  0001 C CNN
	1    2100 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 5150 2100 5250
$Comp
L GNDPWR #PWR?
U 1 1 5BBD5959
P 2100 6150
F 0 "#PWR?" H 2100 5950 50  0001 C CNN
F 1 "GNDPWR" H 2100 6020 50  0000 C CNN
F 2 "" H 2100 6100 50  0001 C CNN
F 3 "" H 2100 6100 50  0001 C CNN
	1    2100 6150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 6050 2100 6150
$Comp
L R_Small R?
U 1 1 5BBD5B22
P 1250 5600
F 0 "R?" H 1280 5620 50  0000 L CNN
F 1 "10m" H 1280 5560 50  0000 L CNN
F 2 "" H 1250 5600 50  0001 C CNN
F 3 "" H 1250 5600 50  0001 C CNN
	1    1250 5600
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR?
U 1 1 5BBD5CC8
P 1250 5400
F 0 "#PWR?" H 1250 5200 50  0001 C CNN
F 1 "GNDPWR" H 1250 5270 50  0000 C CNN
F 2 "" H 1250 5350 50  0001 C CNN
F 3 "" H 1250 5350 50  0001 C CNN
	1    1250 5400
	-1   0    0    1   
$EndComp
Wire Wire Line
	1250 5400 1250 5500
Wire Wire Line
	1650 5750 1650 6100
Wire Wire Line
	1650 6100 2650 6100
Connection ~ 2100 6100
$Comp
L C_Small C?
U 1 1 5BBD6119
P 2650 5900
F 0 "C?" H 2660 5970 50  0000 L CNN
F 1 "0.1uF" H 2660 5820 50  0000 L CNN
F 2 "" H 2650 5900 50  0001 C CNN
F 3 "" H 2650 5900 50  0001 C CNN
	1    2650 5900
	1    0    0    -1  
$EndComp
Wire Wire Line
	2650 5800 2650 5200
Wire Wire Line
	2650 5200 2100 5200
Connection ~ 2100 5200
Wire Wire Line
	2650 6100 2650 6000
Wire Wire Line
	1250 5450 1550 5450
Wire Wire Line
	1550 5450 1550 5550
Wire Wire Line
	1550 5550 1650 5550
Connection ~ 1250 5450
Wire Wire Line
	1250 5700 1250 5900
Wire Wire Line
	1250 5750 1550 5750
Wire Wire Line
	1550 5750 1550 5650
Wire Wire Line
	1550 5650 1650 5650
Text Label 1350 5900 0    60   ~ 12
-Arr
Connection ~ 1250 5750
Text Label 2750 5650 0    60   ~ 12
Array_Current
Wire Wire Line
	2550 5650 3000 5650
Text Notes 1050 5200 0    60   ~ 0
This looks weird,\nbut it is correct.\nCurrent flows\ninto array's -.
$Comp
L INA213 U?
U 1 1 5BBD7DF1
P 2100 7150
F 0 "U?" H 2150 6900 60  0000 L CNN
F 1 "INA213" H 2150 7400 60  0000 L CNN
F 2 "" H 2100 7150 60  0001 C CNN
F 3 "" H 2100 7150 60  0001 C CNN
	1    2100 7150
	1    0    0    -1  
$EndComp
$Comp
L +12P #PWR?
U 1 1 5BBD7DF7
P 2100 6650
F 0 "#PWR?" H 2100 6500 50  0001 C CNN
F 1 "+12P" H 2100 6790 50  0000 C CNN
F 2 "" H 2100 6650 50  0001 C CNN
F 3 "" H 2100 6650 50  0001 C CNN
	1    2100 6650
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 6650 2100 6750
$Comp
L GNDPWR #PWR?
U 1 1 5BBD7DFF
P 2100 7650
F 0 "#PWR?" H 2100 7450 50  0001 C CNN
F 1 "GNDPWR" H 2100 7520 50  0000 C CNN
F 2 "" H 2100 7600 50  0001 C CNN
F 3 "" H 2100 7600 50  0001 C CNN
	1    2100 7650
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 7550 2100 7650
$Comp
L R_Small R?
U 1 1 5BBD7E07
P 1250 7100
F 0 "R?" H 1280 7120 50  0000 L CNN
F 1 "10m" H 1280 7060 50  0000 L CNN
F 2 "" H 1250 7100 50  0001 C CNN
F 3 "" H 1250 7100 50  0001 C CNN
	1    1250 7100
	1    0    0    -1  
$EndComp
Wire Wire Line
	1250 6800 1250 7000
Wire Wire Line
	1650 7250 1650 7600
Wire Wire Line
	1650 7600 2650 7600
Connection ~ 2100 7600
$Comp
L C_Small C?
U 1 1 5BBD7E19
P 2650 7400
F 0 "C?" H 2660 7470 50  0000 L CNN
F 1 "0.1uF" H 2660 7320 50  0000 L CNN
F 2 "" H 2650 7400 50  0001 C CNN
F 3 "" H 2650 7400 50  0001 C CNN
	1    2650 7400
	1    0    0    -1  
$EndComp
Wire Wire Line
	2650 7300 2650 6700
Wire Wire Line
	2650 6700 2100 6700
Connection ~ 2100 6700
Wire Wire Line
	2650 7600 2650 7500
Wire Wire Line
	1250 6950 1550 6950
Wire Wire Line
	1550 6950 1550 7050
Wire Wire Line
	1550 7050 1650 7050
Connection ~ 1250 6950
Wire Wire Line
	1250 7200 1250 7300
Wire Wire Line
	1250 7250 1550 7250
Wire Wire Line
	1550 7250 1550 7150
Wire Wire Line
	1550 7150 1650 7150
Text Label 1350 6800 0    60   ~ 12
-Batt
Connection ~ 1250 7250
Text Label 2750 7150 0    60   ~ 12
Battery_Current
Wire Wire Line
	2550 7150 3000 7150
$Comp
L GNDPWR #PWR?
U 1 1 5BBD81EA
P 1250 7300
F 0 "#PWR?" H 1250 7100 50  0001 C CNN
F 1 "GNDPWR" H 1250 7170 50  0000 C CNN
F 2 "" H 1250 7250 50  0001 C CNN
F 3 "" H 1250 7250 50  0001 C CNN
	1    1250 7300
	1    0    0    -1  
$EndComp
Wire Notes Line
	950  4600 3550 4600
Wire Notes Line
	3550 4600 3550 7850
Wire Notes Line
	3550 7850 950  7850
Wire Notes Line
	950  7850 950  4600
Text Label 5650 4300 0    60   ~ 12
Battery_Current
Text Label 5650 4200 0    60   ~ 12
Array_Current
Text Label 5650 4100 0    60   ~ 12
Battery_Voltage
Text Label 5650 4000 0    60   ~ 12
Array_Voltage
Wire Wire Line
	5450 4000 5650 4000
Wire Wire Line
	5650 4100 5450 4100
Wire Wire Line
	5450 4200 5650 4200
Wire Wire Line
	5650 4300 5450 4300
Text Notes 1050 6550 0    60   ~ 0
This looks weird,\nbut it is correct.\nCurrent flows out\nof battery's -.
Text Notes 3050 3100 0    60   ~ 0
Basic voltage\ndividers
Text Notes 3000 5150 0    60   ~ 0
Low-side\ncurrent\nsense
Text Label 2150 1300 2    60   ~ 12
+Arr
Text Label 1300 3250 2    60   ~ 12
+Arr
Wire Wire Line
	1250 5900 1350 5900
Wire Wire Line
	1350 6800 1250 6800
Text Label 5950 1300 0    60   ~ 12
+Batt
Text Label 2800 3250 2    60   ~ 12
+Batt
Wire Wire Line
	6650 4500 6550 4500
Wire Wire Line
	6550 4500 6550 4400
Connection ~ 6550 4400
$Comp
L +12P #PWR?
U 1 1 5BBE84F4
P 5500 3350
F 0 "#PWR?" H 5500 3200 50  0001 C CNN
F 1 "+12P" H 5500 3490 50  0000 C CNN
F 2 "" H 5500 3350 50  0001 C CNN
F 3 "" H 5500 3350 50  0001 C CNN
	1    5500 3350
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR?
U 1 1 5BBE863D
P 5550 4950
F 0 "#PWR?" H 5550 4750 50  0001 C CNN
F 1 "GNDPWR" H 5550 4820 50  0000 C CNN
F 2 "" H 5550 4900 50  0001 C CNN
F 3 "" H 5550 4900 50  0001 C CNN
	1    5550 4950
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR?
U 1 1 5BBE881B
P 4350 4950
F 0 "#PWR?" H 4350 4750 50  0001 C CNN
F 1 "GNDPWR" H 4350 4820 50  0000 C CNN
F 2 "" H 4350 4900 50  0001 C CNN
F 3 "" H 4350 4900 50  0001 C CNN
	1    4350 4950
	1    0    0    -1  
$EndComp
Text Notes 5850 3800 0    60   ~ 0
NOTE: We would ordinarily isolate the Nucleo from\nthe high power regions, but we don't have a good\nway to do that without redesigning our sensors and\nour software. Therefore, for reasons of expediency,\nwe're placing the Nucleo on the high power plane.
Text Label 4350 3600 2    60   ~ 12
Reset
Wire Wire Line
	4350 3600 4450 3600
Text Label 5650 3550 1    60   ~ 12
Reset
Wire Wire Line
	5650 3600 5450 3600
Wire Wire Line
	5650 3550 5650 3600
$Comp
L TEST TP7
U 1 1 5BBE9136
P 1650 3650
F 0 "TP7" H 1650 3950 50  0000 C BNN
F 1 "Arr_V" H 1650 3900 50  0000 C CNN
F 2 "" H 1650 3650 50  0001 C CNN
F 3 "" H 1650 3650 50  0001 C CNN
	1    1650 3650
	-1   0    0    1   
$EndComp
$Comp
L TEST TP8
U 1 1 5BBE93C9
P 3150 3650
F 0 "TP8" H 3150 3950 50  0000 C BNN
F 1 "Batt_V" H 3150 3900 50  0000 C CNN
F 2 "" H 3150 3650 50  0001 C CNN
F 3 "" H 3150 3650 50  0001 C CNN
	1    3150 3650
	-1   0    0    1   
$EndComp
$Comp
L TEST TP9
U 1 1 5BBE9727
P 3000 5650
F 0 "TP9" H 3000 5950 50  0000 C BNN
F 1 "Arr_I" H 3000 5900 50  0000 C CNN
F 2 "" H 3000 5650 50  0001 C CNN
F 3 "" H 3000 5650 50  0001 C CNN
	1    3000 5650
	-1   0    0    1   
$EndComp
$Comp
L TEST TP10
U 1 1 5BBE99F1
P 3000 7150
F 0 "TP10" H 3000 7450 50  0000 C BNN
F 1 "Batt_I" H 3000 7400 50  0000 C CNN
F 2 "" H 3000 7150 50  0001 C CNN
F 3 "" H 3000 7150 50  0001 C CNN
	1    3000 7150
	-1   0    0    1   
$EndComp
$Comp
L TEST TP11
U 1 1 5BBE9DAD
P 6250 4450
F 0 "TP11" H 6250 4750 50  0000 C BNN
F 1 "PWM" H 6250 4700 50  0000 C CNN
F 2 "" H 6250 4450 50  0001 C CNN
F 3 "" H 6250 4450 50  0001 C CNN
	1    6250 4450
	-1   0    0    1   
$EndComp
Wire Wire Line
	6250 4450 6250 4400
Connection ~ 6250 4400
$Comp
L TEST TP12
U 1 1 5BBEA0EE
P 8200 4450
F 0 "TP12" H 8200 4750 50  0000 C BNN
F 1 "GATE" H 8200 4700 50  0000 C CNN
F 2 "" H 8200 4450 50  0001 C CNN
F 3 "" H 8200 4450 50  0001 C CNN
	1    8200 4450
	-1   0    0    1   
$EndComp
Wire Wire Line
	8200 4450 8200 4400
Connection ~ 8200 4400
$Comp
L PWR_FLAG #FLG?
U 1 1 5BBEA99F
P 8400 1250
F 0 "#FLG?" H 8400 1325 50  0001 C CNN
F 1 "PWR_FLAG" H 8400 1150 50  0000 C CNN
F 2 "" H 8400 1250 50  0001 C CNN
F 3 "" H 8400 1250 50  0001 C CNN
	1    8400 1250
	1    0    0    -1  
$EndComp
Connection ~ 8250 1300
Connection ~ 8250 1400
$Comp
L PWR_FLAG #FLG?
U 1 1 5BBEAF7A
P 8400 1450
F 0 "#FLG?" H 8400 1525 50  0001 C CNN
F 1 "PWR_FLAG" H 8300 1400 50  0001 L CNN
F 2 "" H 8400 1450 50  0001 C CNN
F 3 "" H 8400 1450 50  0001 C CNN
	1    8400 1450
	-1   0    0    1   
$EndComp
Wire Wire Line
	8400 1300 8400 1250
Wire Wire Line
	8400 1400 8400 1450
$Comp
L TEST TP5
U 1 1 5BBEB797
P 9100 1950
F 0 "TP5" H 9100 2250 50  0000 C BNN
F 1 "+12P" H 9100 2200 50  0000 C CNN
F 2 "" H 9100 1950 50  0001 C CNN
F 3 "" H 9100 1950 50  0001 C CNN
	1    9100 1950
	-1   0    0    1   
$EndComp
$Comp
L TEST TP6
U 1 1 5BBEBBC8
P 9400 1950
F 0 "TP6" H 9400 2250 50  0000 C BNN
F 1 "GNDP" H 9400 2200 50  0000 C CNN
F 2 "" H 9400 1950 50  0001 C CNN
F 3 "" H 9400 1950 50  0001 C CNN
	1    9400 1950
	-1   0    0    1   
$EndComp
$Comp
L +12P #PWR?
U 1 1 5BBEBCB3
P 9100 1950
F 0 "#PWR?" H 9100 1800 50  0001 C CNN
F 1 "+12P" H 9100 2090 50  0000 C CNN
F 2 "" H 9100 1950 50  0001 C CNN
F 3 "" H 9100 1950 50  0001 C CNN
	1    9100 1950
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR?
U 1 1 5BBEBE46
P 9400 1950
F 0 "#PWR?" H 9400 1750 50  0001 C CNN
F 1 "GNDPWR" H 9400 1820 50  0000 C CNN
F 2 "" H 9400 1900 50  0001 C CNN
F 3 "" H 9400 1900 50  0001 C CNN
	1    9400 1950
	-1   0    0    1   
$EndComp
$Comp
L TEST TP3
U 1 1 5BBEC40C
P 4700 1250
F 0 "TP3" H 4700 1550 50  0000 C BNN
F 1 "+SNUB" H 4700 1500 50  0000 C CNN
F 2 "" H 4700 1250 50  0001 C CNN
F 3 "" H 4700 1250 50  0001 C CNN
	1    4700 1250
	1    0    0    -1  
$EndComp
$Comp
L TEST TP4
U 1 1 5BBEC8C3
P 4350 1950
F 0 "TP4" H 4350 2250 50  0000 C BNN
F 1 "SNUB_MID" H 4350 2200 50  0000 C CNN
F 2 "" H 4350 1950 50  0001 C CNN
F 3 "" H 4350 1950 50  0001 C CNN
	1    4350 1950
	-1   0    0    1   
$EndComp
Wire Wire Line
	4350 1950 4350 1900
Connection ~ 4550 1900
$Comp
L TEST TP2
U 1 1 5BBECCC0
P 5650 1250
F 0 "TP2" H 5650 1550 50  0000 C BNN
F 1 "+BATT" H 5650 1500 50  0000 C CNN
F 2 "" H 5650 1250 50  0001 C CNN
F 3 "" H 5650 1250 50  0001 C CNN
	1    5650 1250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5650 1250 5650 1300
Connection ~ 5650 1300
$Comp
L TEST TP1
U 1 1 5BBED077
P 2550 1250
F 0 "TP1" H 2550 1550 50  0000 C BNN
F 1 "+ARR" H 2550 1500 50  0000 C CNN
F 2 "" H 2550 1250 50  0001 C CNN
F 3 "" H 2550 1250 50  0001 C CNN
	1    2550 1250
	1    0    0    -1  
$EndComp
$EndSCHEMATC
